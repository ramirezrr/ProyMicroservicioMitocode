-- Crear secuencia para TITULAR
CREATE SEQUENCE titular_seq
    START WITH 1
    INCREMENT BY 1;

-- Crear tabla TITULAR
CREATE TABLE TITULAR
(
    ID               NUMBER(19) NOT NULL PRIMARY KEY,
    APELLIDOS        VARCHAR2(255 CHAR) NOT NULL,
    DIRECCION        VARCHAR2(255 CHAR) NOT NULL,
    FECHA_NACIMIENTO DATE NOT NULL,
    NOMBRES          VARCHAR2(255 CHAR) NOT NULL,
    NUMERO_DOCUMENTO VARCHAR2(255 CHAR) NOT NULL
);

-- Insertar datos en TITULAR
INSERT INTO TITULAR (ID, APELLIDOS, DIRECCION, FECHA_NACIMIENTO, NOMBRES, NUMERO_DOCUMENTO)
VALUES (titular_seq.NEXTVAL, 'García', 'Av. Principal 123', TO_DATE('1990-05-20', 'YYYY-MM-DD'), 'Juan', '12345678');

INSERT INTO TITULAR (ID, APELLIDOS, DIRECCION, FECHA_NACIMIENTO, NOMBRES, NUMERO_DOCUMENTO)
VALUES (titular_seq.NEXTVAL, 'Pérez', 'Calle Secundaria 456', TO_DATE('1985-11-15', 'YYYY-MM-DD'), 'Ana', '87654321');

INSERT INTO TITULAR (ID, APELLIDOS, DIRECCION, FECHA_NACIMIENTO, NOMBRES, NUMERO_DOCUMENTO)
VALUES (titular_seq.NEXTVAL, 'Lopez', 'Calle Tercera 789', TO_DATE('1992-08-30', 'YYYY-MM-DD'), 'Carlos', '11223344');

-- Crear secuencia para TIPO_LICENCIA
CREATE SEQUENCE tipo_licencia_seq
    START WITH 1
    INCREMENT BY 1;

-- Crear tabla TIPO_LICENCIA
CREATE TABLE TIPO_LICENCIA
(
    ID            NUMBER(19) NOT NULL PRIMARY KEY,
    CATEGORIA     VARCHAR2(255 CHAR) NOT NULL CHECK (categoria IN ('A', 'B', 'C', 'D', 'E', 'F')),
    RESTRICCIONES VARCHAR2(255 CHAR) NOT NULL
);

-- Insertar datos en TIPO_LICENCIA
INSERT INTO TIPO_LICENCIA (ID, CATEGORIA, RESTRICCIONES)
VALUES (tipo_licencia_seq.NEXTVAL, 'A', 'Ninguna');

INSERT INTO TIPO_LICENCIA (ID, CATEGORIA, RESTRICCIONES)
VALUES (tipo_licencia_seq.NEXTVAL, 'B', 'Con restricciones para menores de edad');

INSERT INTO TIPO_LICENCIA (ID, CATEGORIA, RESTRICCIONES)
VALUES (tipo_licencia_seq.NEXTVAL, 'C', 'Con restricciones para conductores novatos');

-- Crear secuencia para LICENCIA
CREATE SEQUENCE licencia_seq
    START WITH 1
    INCREMENT BY 1;

-- Crear tabla LICENCIA
CREATE TABLE LICENCIA
(
    ID                        NUMBER(19) NOT NULL PRIMARY KEY,
    DELETED                   NUMBER(1) NOT NULL CHECK (deleted IN (0, 1)),
    ESTADO                    VARCHAR2(255 CHAR) NOT NULL CHECK (estado IN ('ACTIVO', 'INACTIVO')),
    FECHA_EMISION             DATE NOT NULL,
    FECHA_PROXIMA_VENCIMIENTO DATE NOT NULL,
    FECHA_ULTIMA_RENOVACION   DATE NOT NULL,
    FECHA_VENCIMIENTO         DATE NOT NULL,
    TIPO_LICENCIA_ID          NUMBER(19) NOT NULL
                              CONSTRAINT FK9YYDAI3CLV3O7T2MNTSYC76LJ REFERENCES TIPO_LICENCIA,
    TITULAR_ID                NUMBER(19) NOT NULL
                              CONSTRAINT FKU4KNHC4XW0ERXUF0SK197OJE REFERENCES TITULAR
);

-- Insertar datos en LICENCIA
INSERT INTO LICENCIA (ID, DELETED, ESTADO, FECHA_EMISION, FECHA_PROXIMA_VENCIMIENTO, FECHA_ULTIMA_RENOVACION,
                      FECHA_VENCIMIENTO, TIPO_LICENCIA_ID, TITULAR_ID)
VALUES (licencia_seq.NEXTVAL, 0, 'ACTIVO', TO_DATE('2024-01-15', 'YYYY-MM-DD'), TO_DATE('2025-01-15', 'YYYY-MM-DD'),
        TO_DATE('2024-01-15', 'YYYY-MM-DD'), TO_DATE('2026-01-15', 'YYYY-MM-DD'), 1, 1);

INSERT INTO LICENCIA (ID, DELETED, ESTADO, FECHA_EMISION, FECHA_PROXIMA_VENCIMIENTO, FECHA_ULTIMA_RENOVACION,
                      FECHA_VENCIMIENTO, TIPO_LICENCIA_ID, TITULAR_ID)
VALUES (licencia_seq.NEXTVAL, 0, 'ACTIVO', TO_DATE('2024-02-20', 'YYYY-MM-DD'), TO_DATE('2025-02-20', 'YYYY-MM-DD'),
        TO_DATE('2024-02-20', 'YYYY-MM-DD'), TO_DATE('2026-02-20', 'YYYY-MM-DD'), 2, 2);

INSERT INTO LICENCIA (ID, DELETED, ESTADO, FECHA_EMISION, FECHA_PROXIMA_VENCIMIENTO, FECHA_ULTIMA_RENOVACION,
                      FECHA_VENCIMIENTO, TIPO_LICENCIA_ID, TITULAR_ID)
VALUES (licencia_seq.NEXTVAL, 0, 'INACTIVO', TO_DATE('2024-03-25', 'YYYY-MM-DD'), TO_DATE('2025-03-25', 'YYYY-MM-DD'),
        TO_DATE('2024-03-25', 'YYYY-MM-DD'), TO_DATE('2026-03-25', 'YYYY-MM-DD'), 3, 3);
